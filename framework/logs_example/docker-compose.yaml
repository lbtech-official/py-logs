version: '3.8'

x-logging: &loki-logging
    driver: loki
    options:
        loki-url: "http://localhost:3100/loki/api/v1/push"

services:
    web:
        build: .
        logging: *loki-logging

    nginx:
        image: nginx:latest
        container_name: nginx_logs
        depends_on:
            - web
        ports:
            - "8000:8000"
        volumes:
            - ./conf/nginx.conf:/etc/nginx/nginx.conf
        logging: *loki-logging